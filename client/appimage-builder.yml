version: 1

script:
  - rm -rf AppDir || true
  - mkdir -p AppDir
  - cp -r build/linux/x64/release/bundle/* AppDir/
  # Создаем директории для иконок
  - mkdir -p AppDir/usr/share/icons/hicolor/512x512/apps
  - cp appimage_builder/client.png AppDir/usr/share/icons/hicolor/256x256/apps/
  - cp appimage_builder/client.png AppDir/ # Для совместимости
  - cp appimage_builder/client.desktop AppDir/

AppDir:
  path: ./AppDir

  app_info:
    id: com.yourcompany.todo
    name: ToDo
    icon: client
    version: 1.0.0
    exec: client
    exec_args: $@

  apt:
    arch: amd64
    sources:
      - sourceline: "deb [trusted=yes] http://archive.ubuntu.com/ubuntu/ focal main restricted universe multiverse"
    include:
      - libgtk-3-0
      - libsecret-1-0
      - libnotify4
      - libayatana-appindicator3-1

  files:
    exclude:
      - usr/share/man
      - usr/share/doc/*/README.*
      - usr/share/doc/*/changelog.*

AppImage:
  arch: x86_64
  update-information: guess
  sign-key: None